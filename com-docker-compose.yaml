version: "3.7"
services:

#  tracardi-api:
#    image: tracardi/tracardi-api:0.8.2-rc1
#    environment:
#      ELASTIC_HOST: http://elasticsearch:9200
#      REDIS_HOST: redis://redis:6379
#      LOGGING_LEVEL: info
#      DEMO: yes
#      PRODUCTION: no
#      PULSAR_HOST: pulsar://pulsar:6650
#      ASYNC_PROCESSING: yes
#      LICENSE: ${API_LICENSE}
#    ports:
#      - 8686:80
#    depends_on:
#      - redis
#      - elasticsearch
#      - pulsar
#      - tracardi-event-storage-worker

#  tracardi-event-storage-worker:
#    image: tracardi/com-tracardi-storage-worker:0.8.2-rc1
#    environment:
#      ELASTIC_HOST: http://elasticsearch:9200
#      REDIS_HOST: redis://redis:6379
#      LOGGING_LEVEL: info
#      CONSUMER_TYPE: event
#      PULSAR_HOST: pulsar://pulsar:6650
#      LICENSE: ${API_LICENSE}
#    depends_on:
#      - redis
#      - elasticsearch
#      - pulsar

#  tracardi-profile-storage-worker:
#    image: tracardi/com-tracardi-storage-worker:0.8.2-rc1
#    environment:
#      ELASTIC_HOST: http://elasticsearch:9200
#      REDIS_HOST: redis://redis:6379
#      LOGGING_LEVEL: info
#      CONSUMER_TYPE: profile
#      PULSAR_HOST: pulsar://pulsar:6650
#      LICENSE: ${API_LICENSE}
#    depends_on:
#      - redis
#      - elasticsearch
#      - pulsar

#  tracardi-session-storage-worker:
#    image: tracardi/com-tracardi-storage-worker:0.8.2-rc1
#    environment:
#      ELASTIC_HOST: http://elasticsearch:9200
#      REDIS_HOST: redis://redis:6379
#      LOGGING_LEVEL: info
#      CONSUMER_TYPE: session
#      PULSAR_HOST: pulsar://pulsar:6650
#      LICENSE: ${API_LICENSE}
#    depends_on:
#      - redis
#      - elasticsearch
#      - pulsar

#  tracardi-visit-end-worker:
#    image: tracardi/com-tracardi-visit-end-worker:0.8.2-rc1
#    environment:
#      ELASTIC_HOST: http://elasticsearch:9200
#      REDIS_HOST: redis://redis:6379
#      LOGGING_LEVEL: info
#      CONSUMER_TYPE: event
#      PULSAR_HOST: pulsar://pulsar:6650
#      LICENSE: ${API_LICENSE}


#  tracardi-gui:
#    image: tracardi/tracardi-gui:0.8.2-rc1
#    ports:
#      - 8787:80
#    depends_on:
#      - tracardi-api

  pulsar:
    image: apachepulsar/pulsar:3.1.0
    restart: always
    ports:
      - 6650:6650
    environment:
      PULSAR_LOG_LEVEL: warn
    command: bin/pulsar standalone

#  elasticsearch:
#    image: docker.elastic.co/elasticsearch/elasticsearch:7.13.2
#    environment:
#      bootstrap.memory_lock: "true"
#      ES_JAVA_OPTS: "-Xms512m -Xmx512m"
#      discovery.type: single-node
#      xpack.security.enabled: "false"
#      cluster.name: contextElasticSearch
#
#  redis:
#    image: redis

#  worker:
#    image: tracardi/update-worker:0.8.2-rc1
#    environment:
#      REDIS_HOST: redis://redis:6379

#volumes:
#  elasticsearch-data:
#    driver: local
