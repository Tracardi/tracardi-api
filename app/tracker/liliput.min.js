!function(e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).tracardi=e()}(function(){return function r(o,i,a){function u(t,e){if(!i[t]){if(!o[t]){var n="function"==typeof require&&require;if(!e&&n)return n(t,!0);if(c)return c(t,!0);throw(n=new Error("Cannot find module '"+t+"'")).code="MODULE_NOT_FOUND",n}n=i[t]={exports:{}},o[t][0].call(n.exports,function(e){return u(o[t][1][e]||e)},n,n.exports,r,o,i,a)}return i[t].exports}for(var c="function"==typeof require&&require,e=0;e<a.length;e++)u(a[e]);return u}({1:[function(e,t,n){var u=e("@analytics/global-storage-utils"),c=o(),e=i;function r(e){return c?i(e,"",-1):u.remove(e)}function o(){if(typeof c!==u.undef)return c;try{i("__x","__x"),c=-1!==document.cookie.indexOf("__x"),r("__x")}catch(e){c=!1}return c}function i(e,t,n,r,o,i){if(typeof window!==u.undef){var a=1<arguments.length;return c||(a?u.set(e,t):u.get(e)),a?document.cookie=e+"="+encodeURIComponent(t)+(n?"; expires="+new Date(+new Date+1e3*n).toUTCString()+(r?"; path="+r:"")+(o?"; domain="+o:"")+(i?"; secure":""):""):decodeURIComponent((("; "+document.cookie).split("; "+e+"=")[1]||"").split(";")[0])}}n.getCookie=i,n.hasCookies=o,n.removeCookie=r,n.setCookie=e},{"@analytics/global-storage-utils":3}],2:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var q=e("analytics-utils"),z=e("@analytics/global-storage-utils"),F=e("@analytics/type-utils");var r=function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}};var o=function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)};var i=function(){throw new TypeError("Invalid attempt to spread non-iterable instance")};var V=function(e){return r(e)||o(e)||i()};function a(e,t){return e(t={exports:{}},t.exports),t.exports}var $=a(function(t){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e){return"function"==typeof Symbol&&"symbol"===n(Symbol.iterator)?t.exports=r=function(e){return n(e)}:t.exports=r=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":n(e)},r(e)}t.exports=r}),G=a(function(t){t=function(a){var c,e=Object.prototype,s=e.hasOwnProperty,t="function"==typeof Symbol?Symbol:{},r=t.iterator||"@@iterator",n=t.asyncIterator||"@@asyncIterator",o=t.toStringTag||"@@toStringTag";function i(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{i({},"")}catch(e){i=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var o,i,a,u,t=t&&t.prototype instanceof y?t:y,t=Object.create(t.prototype),r=new S(r||[]);return t._invoke=(o=e,i=n,a=r,u=f,function(e,t){if(u===p)throw new Error("Generator is already running");if(u===g){if("throw"===e)throw t;return I()}for(a.method=e,a.arg=t;;){var n=a.delegate;if(n){var r=function e(t,n){var r=t.iterator[n.method];if(r===c){if(n.delegate=null,"throw"===n.method){if(t.iterator.return&&(n.method="return",n.arg=c,e(t,n),"throw"===n.method))return v;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return v}var r=l(r,t.iterator,n.arg);if("throw"===r.type)return n.method="throw",n.arg=r.arg,n.delegate=null,v;r=r.arg;if(!r)return n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v;{if(!r.done)return r;n[t.resultName]=r.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=c)}n.delegate=null;return v}(n,a);if(r){if(r===v)continue;return r}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if(u===f)throw u=g,a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);u=p;r=l(o,i,a);if("normal"===r.type){if(u=a.done?g:d,r.arg!==v)return{value:r.arg,done:a.done}}else"throw"===r.type&&(u=g,a.method="throw",a.arg=r.arg)}}),t}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}a.wrap=u;var f="suspendedStart",d="suspendedYield",p="executing",g="completed",v={};function y(){}function h(){}function m(){}var b={};b[r]=function(){return this};t=Object.getPrototypeOf,t=t&&t(t(E([])));t&&t!==e&&s.call(t,r)&&(b=t);var w=m.prototype=y.prototype=Object.create(b);function x(e){["next","throw","return"].forEach(function(t){i(e,t,function(e){return this._invoke(t,e)})})}function O(a,u){var t;this._invoke=function(n,r){function e(){return new u(function(e,t){!function t(e,n,r,o){e=l(a[e],a,n);if("throw"!==e.type){var i=e.arg;return(n=i.value)&&"object"==typeof n&&s.call(n,"__await")?u.resolve(n.__await).then(function(e){t("next",e,r,o)},function(e){t("throw",e,r,o)}):u.resolve(n).then(function(e){i.value=e,r(i)},function(e){return t("throw",e,r,o)})}o(e.arg)}(n,r,e,t)})}return t=t?t.then(e,e):e()}}function k(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function j(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function S(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(k,this),this.reset(!0)}function E(t){if(t){var e=t[r];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,e=function e(){for(;++n<t.length;)if(s.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=c,e.done=!0,e};return e.next=e}}return{next:I}}function I(){return{value:c,done:!0}}return((h.prototype=w.constructor=m).constructor=h).displayName=i(m,o,"GeneratorFunction"),a.isGeneratorFunction=function(e){e="function"==typeof e&&e.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},a.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,i(e,o,"GeneratorFunction")),e.prototype=Object.create(w),e},a.awrap=function(e){return{__await:e}},x(O.prototype),O.prototype[n]=function(){return this},a.AsyncIterator=O,a.async=function(e,t,n,r,o){void 0===o&&(o=Promise);var i=new O(u(e,t,n,r),o);return a.isGeneratorFunction(t)?i:i.next().then(function(e){return e.done?e.value:i.next()})},x(w),i(w,o,"Generator"),w[r]=function(){return this},w.toString=function(){return"[object Generator]"},a.keys=function(n){var e,r=[];for(e in n)r.push(e);return r.reverse(),function e(){for(;r.length;){var t=r.pop();if(t in n)return e.value=t,e.done=!1,e}return e.done=!0,e}},a.values=E,S.prototype={constructor:S,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=c,this.done=!1,this.delegate=null,this.method="next",this.arg=c,this.tryEntries.forEach(j),!e)for(var t in this)"t"===t.charAt(0)&&s.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=c)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(n){if(this.done)throw n;var r=this;function e(e,t){return i.type="throw",i.arg=n,r.next=e,t&&(r.method="next",r.arg=c),!!t}for(var t=this.tryEntries.length-1;0<=t;--t){var o=this.tryEntries[t],i=o.completion;if("root"===o.tryLoc)return e("end");if(o.tryLoc<=this.prev){var a=s.call(o,"catchLoc"),u=s.call(o,"finallyLoc");if(a&&u){if(this.prev<o.catchLoc)return e(o.catchLoc,!0);if(this.prev<o.finallyLoc)return e(o.finallyLoc)}else if(a){if(this.prev<o.catchLoc)return e(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return e(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;0<=n;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&s.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}var i=(o=o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc?null:o)?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,v):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),j(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r,o=n.completion;return"throw"===o.type&&(r=o.arg,j(n)),r}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:E(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=c),v}},a}(t.exports);try{regeneratorRuntime=t}catch(e){Function("r","regeneratorRuntime = r")(t)}});function c(e,t,n,r,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(r,o)}var Z=function(u){return function(){var e=this,a=arguments;return new Promise(function(t,n){var r=u.apply(e,a);function o(e){c(r,t,n,o,i,"next",e)}function i(e){c(r,t,n,o,i,"throw",e)}o(void 0)})}};var d=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e};function u(t,e){var n,r=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)),r}var J=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?u(n,!0).forEach(function(e){d(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):u(n).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t},p="function",g="undefined",v="reducer",s="@@redux/",y=s+"INIT",h=s+Math.random().toString(36),m=function(){return("undefined"==typeof Symbol?"undefined":$(Symbol))===p&&Symbol.observable||"@@observable"}(),b=" != "+p;function H(e,t,n){if($(t)===p&&$(n)===g&&(n=t,t=void 0),$(n)!==g){if($(n)!==p)throw new Error("enhancer"+b);return n(H)(e,t)}if($(e)!==p)throw new Error(v+b);var r=e,o=t,i=[],a=i,u=!1;function c(){a===i&&(a=i.slice())}function s(){return o}function l(t){if($(t)!==p)throw new Error("Listener"+b);var n=!0;return c(),a.push(t),function(){var e;n&&(n=!1,c(),e=a.indexOf(t),a.splice(e,1))}}function f(e){if(!F.isObject(e))throw new Error("Act != obj");if($(e.type)===g)throw new Error("ActType "+g);if(u)throw new Error("Dispatch in "+v);try{u=!0,o=r(o,e)}finally{u=!1}for(var t=i=a,n=0;n<t.length;n++)(0,t[n])();return e}return f({type:y}),d({dispatch:f,subscribe:l,getState:s,replaceReducer:function(e){if($(e)!==p)throw new Error("next "+v+b);r=e,f({type:y})}},m,function(){var n=l;return d({subscribe:function(e){if("object"!==$(e))throw new TypeError("Observer != obj");function t(){e.next&&e.next(o)}return t(),{unsubscribe:n(t)}}},m,function(){return this})})}function W(e){for(var t=Object.keys(e),l={},n=0;n<t.length;n++){var r=t[n];$(e[r])===p&&(l[r]=e[r])}var f,o,d=Object.keys(l);try{o=l,Object.keys(o).forEach(function(e){var t=o[e],n=t(void 0,{type:y});if($(n)===g||$(t(void 0,{type:h}))===g)throw new Error(v+" "+e+" "+g)})}catch(e){f=e}return function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=1<arguments.length?arguments[1]:void 0;if(f)throw f;for(var n=!1,r={},o=0;o<d.length;o++){var i=d[o],a=l[i],u=e[i],c=a(u,t);if($(c)===g){var s=(s=i,"action "+((a=(a=t)&&a.type)&&a.toString()||"?")+v+" "+s+" returns "+g);throw new Error(s)}r[i]=c,n=n||c!==u}return n?r:e}}function X(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce(function(e,t){return function(){return e(t.apply(void 0,arguments))}})}var l="analytics",Y="userId",K="anonymousId",f="__",Q=f+"anon_id",ee=f+"user_id",te=f+"user_traits",w=Object.freeze({ANON_ID:Q,USER_ID:ee,USER_TRAITS:te}),ne=["bootstrap","params","campaign","initializeStart","initialize","initializeEnd","ready","resetStart","reset","resetEnd","pageStart","page","pageEnd","pageAborted","trackStart","track","trackEnd","trackAborted","identifyStart","identify","identifyEnd","identifyAborted","userIdChanged","registerPlugins","enablePlugin","disablePlugin","online","offline","setItemStart","setItem","setItemEnd","setItemAborted","removeItemStart","removeItem","removeItemEnd","removeItemAborted"],re=["name","EVENTS","config","loaded"],oe=ne.reduce(function(e,t){return e[t]=t,e},{registerPluginType:function(e){return"registerPlugin:".concat(e)},pluginReadyType:function(e){return"ready:".concat(e)}});var ie=/^utm_/,ae=/^an_prop_/,ue=/^an_trait_/;function ce(e){return{userId:e.getItem(ee),anonymousId:e.getItem(Q),traits:e.getItem(te)}}var se=function(e){return f+"TEMP"+f+e};var x={};function O(e,t){x[e]&&F.isFunction(x[e])&&(x[e](t),delete x[e])}function k(o,i,a){return new Promise(function(t,n){return i()?t(o):a<1?n(J(J({},o),{},{queue:!0})):(r=10,new Promise(function(e){return setTimeout(e,r)}).then(function(e){return k(o,i,a-10).then(t,n)}));var r})}function le(o,e,i){var n,a=e(),t=o.getState(),u=t.plugins,e=t.context,c=t.queue,s=t.user;!e.offline&&c&&c.actions&&c.actions.length&&((n=c.actions.reduce(function(e,t,n){return u[t.plugin].loaded?(e.process.push(t),e.processIndex.push(n)):(e.requeue.push(t),e.requeueIndex.push(n)),e},{processIndex:[],process:[],requeue:[],requeueIndex:[]})).processIndex&&n.processIndex.length&&(n.processIndex.forEach(function(e){var t=c.actions[e],n=t.plugin,r=t.payload.type,e=a[n][r];e&&F.isFunction(e)&&(e({payload:t=function(){var n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return[Y,K].reduce(function(e,t){return n.hasOwnProperty(t)&&r[t]&&r[t]!==n[t]&&(e[t]=r[t]),e},n)}(t.payload,s),config:u[n].config,instance:i}),n="".concat(r,":").concat(n),o.dispatch(J(J({},t),{},{type:n,_:{called:n,from:"queueDrain"}})))}),e=c.actions.filter(function(e,t){return!~n.processIndex.indexOf(t)}),c.actions=e))}var j=function(e){if(Array.isArray(e))return e};var S=function(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var a,u=e[Symbol.iterator]();!(r=(a=u.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==u.return||u.return()}finally{if(o)throw i}}return n};var E=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")};var I=function(e,t){return j(e)||S(e,t)||E()};var _=/Start$/,P=/^bootstrap/,A=/^ready/;function T(){return(T=Z(G.mark(function e(n,t,r,o,i){var a,u,c,s,l,f,d,p,g;return G.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=F.isFunction(t)?t():t,u=n.type,c=u.replace(_,""),n._&&n._.called)return e.abrupt("return",n);e.next=5;break;case 5:return s=r.getState(),f=function(t,e,n){var r=1<arguments.length&&void 0!==e?e:{},o=2<arguments.length&&void 0!==n?n:{};return Object.keys(t).filter(function(e){var t=o.plugins||{};return F.isBoolean(t[e])?t[e]:!1!==t.all&&(!r[e]||!1!==r[e].enabled)}).map(function(e){return t[e]})}(a,s.plugins,n.options),u===oe.initializeStart&&n.fromEnable&&(f=Object.keys(s.plugins).filter(function(e){var t=s.plugins[e];return n.plugins.includes(e)&&!t.initialized}).map(function(e){return a[e]})),l=f.map(function(e){return e.name}),f=function(i,a){var e=U(i).map(function(e){return R(e,a)});return a.reduce(function(e,t){var n=t.name,r=U(i,n).map(function(e){return R(e,a)}),o=I(r,3),t=o[0],r=o[1],o=o[2];return t.length&&(e.beforeNS[n]=t),r.length&&(e.duringNS[n]=r),o.length&&(e.afterNS[n]=o),e},{before:e[0],beforeNS:{},during:e[1],duringNS:{},after:e[2],afterNS:{}})}(u,f),e.next=12,N({action:n,data:{exact:f.before,namespaced:f.beforeNS},state:s,allPlugins:a,allMatches:f,instance:r,store:o,EVENTS:i});case 12:if(B(d=e.sent,l.length))return e.abrupt("return",d);e.next=15;break;case 15:if(u!==c){e.next=19;break}p=d,e.next=22;break;case 19:return e.next=21,N({action:J(J({},d),{},{type:c}),data:{exact:f.during,namespaced:f.duringNS},state:s,allPlugins:a,allMatches:f,instance:r,store:o,EVENTS:i});case 21:p=e.sent;case 22:if(u.match(_))return g="".concat(c,"End"),e.next=26,N({action:J(J({},p),{},{type:g}),data:{exact:f.after,namespaced:f.afterNS},state:s,allPlugins:a,allMatches:f,instance:r,store:o,EVENTS:i});e.next=28;break;case 26:(g=e.sent).meta&&g.meta.hasCallback&&O(g.meta.rid,{payload:g});case 28:return e.abrupt("return",d);case 29:case"end":return e.stop()}},e)}))).apply(this,arguments)}function N(){return C.apply(this,arguments)}function C(){return(C=Z(G.mark(function e(t){var d,a,p,g,n,v,r,y,o,h,m,b,w,x,i,u;return G.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return d=t.data,a=t.action,p=t.instance,u=t.state,g=t.allPlugins,n=t.allMatches,v=t.store,r=t.EVENTS,y=u.plugins,o=u.context,h=a.type,m=h.match(_),u=d.exact.map(function(e){return e.pluginName}),m&&(u=n.during.map(function(e){return e.pluginName})),b=function(p,g){return function(e,t,n){var r=t.config,o=t.name,t="".concat(o,".").concat(e.type);n&&(t=n.event);var i,a,u,c,s,l,f,d,t=e.type.match(_)?(u=o,c=t,s=g,l=n,f=e,function(e,t){var n=l?l.name:u,r=t&&fe(t)?t:s;if(l&&(!(r=t&&fe(t)?t:[u]).includes(u)||1!==r.length))throw new Error("Method ".concat(c," can only abort ").concat(u," plugin. ").concat(JSON.stringify(r)," input valid"));return J(J({},f),{},{abort:{reason:e,plugins:r,caller:c,_:n}})}):(i=e,a=t,function(){throw new Error(i.type+" action not cancellable. Remove abort in "+a)});return{payload:(d=e,Object.keys(d).reduce(function(e,t){return"type"===t||(F.isObject(d[t])?e[t]=Object.assign({},d[t]):e[t]=d[t]),e},{})),instance:p,config:r||{},abort:t}}}(p,u),w=d.exact.reduce(function(e,t){var n=t.pluginName,r=t.methodName,t=!1;return r.match(/^initialize/)||r.match(/^reset/)||(t=!y[n].loaded),o.offline&&r.match(/^(page|track|identify)/)&&(t=!0),e["".concat(n)]=t,e},{}),e.next=10,d.exact.reduce(function(){var r=Z(G.mark(function e(t,n,r){var u,o,i;return G.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return u=n.pluginName,e.next=3,t;case 3:if(o=e.sent,d.namespaced&&d.namespaced[u])return e.next=7,d.namespaced[u].reduce(function(){var r=Z(G.mark(function e(t,n,r){var o,i,a;return G.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=function(r,o,i){return function(e,t){var n=i||o;return J(J({},r),{},{abort:{reason:e,plugins:t||[o],caller:h,from:n}})}},e.next=3,t;case 3:if(o=e.sent,n.method&&F.isFunction(n.method)){e.next=6;break}return e.abrupt("return",o);case 6:return function(e,t){var n=pe(e);if(n&&n.name===t){var r=pe(n.method),r=r?"or "+r.method:"";throw new Error([t+" plugin is calling method "+e,"Plugins cant call self","Use ".concat(n.method," ").concat(r," in ").concat(t," plugin insteadof ").concat(e)].join("\n"))}}(n.methodName,n.pluginName),e.next=9,n.method({payload:o,instance:p,abort:i(o,u,n.pluginName),config:M(n.pluginName,y,g),plugins:y});case 9:return a=e.sent,a=F.isObject(a)?a:{},e.abrupt("return",Promise.resolve(J(J({},o),a)));case 12:case"end":return e.stop()}},e)}));return function(e,t,n){return r.apply(this,arguments)}}(),Promise.resolve(a));e.next=11;break;case 7:i=e.sent,o[u]=i,e.next=12;break;case 11:o[u]=a;case 12:return e.abrupt("return",Promise.resolve(o));case 13:case"end":return e.stop()}},e)}));return function(e,t,n){return r.apply(this,arguments)}}(),Promise.resolve({}));case 10:return x=e.sent,e.next=13,d.exact.reduce(function(){var r=Z(G.mark(function e(t,n,r){var o,i,a,u,c,s,l,f;return G.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=d.exact.length===r+1,i=n.pluginName,a=g[i],e.next=5,t;case 5:if(u=e.sent,c=x[i]||{},D(c=m?u:c,i))return L({data:c,method:h,instance:p,pluginName:i,store:v}),e.abrupt("return",Promise.resolve(u));e.next=11;break;case 11:if(D(u,i))return o&&L({data:u,method:h,instance:p,store:v}),e.abrupt("return",Promise.resolve(u));e.next=14;break;case 14:if(w.hasOwnProperty(i)&&!0===w[i])return v.dispatch({type:"queue",plugin:i,payload:c,_:{called:"queue",from:"queueMechanism"}}),e.abrupt("return",Promise.resolve(u));e.next=17;break;case 17:return s=b(x[i],g[i]),e.next=20,a[h]({abort:s.abort,payload:c,instance:p,config:M(i,y,g),plugins:y});case 20:return f=e.sent,l=F.isObject(f)?f:{},s=J(J({},u),l),D(f=x[i],i)?L({data:f,method:h,instance:p,pluginName:i,store:v}):(l="".concat(h,":").concat(i),(l.match(/:/g)||[]).length<2&&!h.match(P)&&!h.match(A)&&(f=m?s:c,p.dispatch(J(J({},f),{},{type:l,_:{called:l,from:"submethod"}})))),e.abrupt("return",Promise.resolve(s));case 26:case"end":return e.stop()}},e)}));return function(e,t,n){return r.apply(this,arguments)}}(),Promise.resolve(a));case 13:if(i=e.sent,h.match(_)||h.match(/^registerPlugin/)||h.match(A)||h.match(P)||h.match(/^params/)||h.match(/^userIdChanged/)){e.next=21;break}if(r.plugins.includes(h),i._&&i._.originalAction===h)return e.abrupt("return",i);e.next=18;break;case 18:u=J(J({},i),{_:{originalAction:i.type,called:i.type,from:"engineEnd"}}),B(i,d.exact.length)&&!h.match(/End$/)&&(u=J(J({},u),{type:i.type+"Aborted"})),v.dispatch(u);case 21:return e.abrupt("return",i);case 22:case"end":return e.stop()}},e)}))).apply(this,arguments)}function L(e){var t=e.data,n=e.method,r=(e.instance,e.pluginName),r=n+"Aborted"+(r?":"+r:"");e.store.dispatch(J(J({},t),{},{type:r,_:{called:r,from:"abort"}}))}function M(e,t,n){e=t[e]||n[e];return e&&e.config?e.config:{}}function R(n,e){return e.reduce(function(e,t){return t[n]?e.concat({methodName:n,pluginName:t.name,method:t[n]}):e},[])}function U(e,t){var n=e.replace(_,""),t=t?":".concat(t):"";return["".concat(e).concat(t),"".concat(n).concat(t),"".concat(n,"End").concat(t)]}function D(e,t){e=e.abort;return e&&(!0===e||(de(e,t)||e&&de(e.plugins,t)))}function B(e,t){var n=e.abort;if(n){if(!0===n||F.isString(n))return 1;e=n.plugins;return fe(n)&&n.length===t||fe(e)&&e.length===t}}function fe(e){return Array.isArray(e)}function de(e,t){return!(!e||!fe(e))&&e.includes(t)}function pe(e){e=e.match(/(.*):(.*)/);return!!e&&{method:e[1],name:e[2]}}function ge(v,y,h){var m={};return function(g){return function(p){return function(){var t=Z(G.mark(function e(t){var n,r,o,i,a,u,c,s,l,f,d;return G.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.type,r=t.abort,o=t.plugins,i=t,r)return e.abrupt("return",p(t));e.next=4;break;case 4:if(n===oe.enablePlugin&&g.dispatch({type:oe.initializeStart,plugins:o,disabled:[],fromEnable:!0,meta:t.meta}),n===oe.disablePlugin&&setTimeout(function(){return O(t.meta.rid,{payload:t})},0),n===oe.initializeEnd&&(a=y(),u=Object.keys(a),d=u.filter(function(e){return o.includes(e)}).map(function(e){return a[e]}),c=[],s=[],l=t.disabled,f=d.map(function(t){var e=t.loaded,n=t.name;return k(t,e,1e4).then(function(e){return m[n]||(g.dispatch({type:oe.pluginReadyType(n),name:n,events:Object.keys(t).filter(function(e){return!re.includes(e)})}),m[n]=!0),c=c.concat(n),t}).catch(function(e){if(e instanceof Error)throw new Error(e);return s=s.concat(e.name),e})}),Promise.all(f).then(function(e){var t={plugins:c,failed:s,disabled:l};setTimeout(function(){u.length===f.length+l.length&&g.dispatch(J(J({},{type:oe.ready}),t))},0)})),n!==oe.bootstrap)return/^ready:([^:]*)$/.test(n)&&setTimeout(function(){return le(g,y,v)},0),e.next=11,function(){return T.apply(this,arguments)}(t,y,v,g,h);e.next=13;break;case 11:return d=e.sent,e.abrupt("return",p(d));case 13:return e.abrupt("return",p(i));case 14:case"end":return e.stop()}},e)}));return function(e){return t.apply(this,arguments)}}()}}}function ve(){var a=this;ye(this,ve),d(this,"before",[]),d(this,"after",[]),d(this,"addMiddleware",function(e,t){a[t]=a[t].concat(e)}),d(this,"removeMiddleware",function(t,e){var n=a[e].findIndex(function(e){return e===t});-1!==n&&(a[e]=[].concat(V(a[e].slice(0,n)),V(a[e].slice(n+1))))}),d(this,"dynamicMiddlewares",function(i){return function(o){return function(r){return function(e){var t={getState:o.getState,dispatch:function(e){return o.dispatch(e)}},n=a[i].map(function(e){return e(t)});return X.apply(void 0,V(n))(r)(e)}}}})}var ye=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")};function he(e,t){return e.substring(t.length+1,e.length)}function me(e,n,r){return e.reduce(function(e,t){return e[t]=J(J({},r[t]),{enabled:n}),e},r)}function be(e){try{return JSON.parse(JSON.stringify(e))}catch(e){}return e}var we={last:{},history:[]};function xe(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:we,t=1<arguments.length?arguments[1]:void 0,n=t.type,r=t.event,o=t.properties,i=t.options,t=t.meta;if(n!==oe.track)return e;t=be(J(J({event:r,properties:o},Object.keys(i).length&&{options:i}),{},{meta:t}));return J(J({},e),{last:t,history:e.history.concat(t)})}var Oe={actions:[]};function ke(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:Oe,t=1<arguments.length?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case"queue":var o=r&&r.type&&r.type===oe.identify?[t].concat(e.actions):e.actions.concat(t);return J(J({},e),{},{actions:o});case"dequeue":return[];default:return e}}var je=/#.*$/;function Se(e){var t=function(){if(F.isBrowser)for(var e,t=document.getElementsByTagName("link"),n=0;e=t[n];n++)if("canonical"===e.getAttribute("rel"))return e.getAttribute("href")}();return t?t.match(/\?/)?t:t+e:window.location.href.replace(je,"")}function Ee(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};if(!F.isBrowser)return e;var t=(u=document).title,n=u.referrer,r=window,o=r.location,i=r.innerWidth,a=r.innerHeight,u=o.hash,o=Se(r=o.search),a={title:t,url:o,path:"/"+((o=/(http[s]?:\/\/)?([^\/\s]+\/)(.*)/g.exec(o=o))&&o[3]?o[3].split("?")[0].replace(je,""):""),hash:u,search:r,width:i,height:a};return n&&""!==n&&(a.referrer=n),J(J({},a),e)}var Ie={last:{},history:[]};function _e(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:Ie,t=1<arguments.length?arguments[1]:void 0,n=t.properties,r=t.options,o=t.meta;if(t.type!==oe.page)return e;r=be(J({properties:n,meta:o},Object.keys(r).length&&{options:r}));return J(J({},e),{last:r,history:e.history.concat(r)})}var Pe=function(){if(!F.isBrowser)return!1;var e=navigator.appVersion;return~e.indexOf("Win")?"Windows":~e.indexOf("Mac")?"MacOS":~e.indexOf("X11")?"UNIX":~e.indexOf("Linux")?"Linux":"Unknown OS"}(),Ae=F.isBrowser?document.referrer:null,e=q.getBrowserLocale(),s=q.getTimeZone(),Te={initialized:!1,sessionId:q.uuid(),app:null,version:null,debug:!1,offline:!!F.isBrowser&&!navigator.onLine,os:{name:Pe},userAgent:F.isBrowser?navigator.userAgent:"node",library:{name:l,version:"0.10.17"},timezone:s,locale:e,campaign:{},referrer:Ae};function Ne(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:Te,t=1<arguments.length?arguments[1]:void 0,n=e.initialized,r=t.type,o=t.campaign;switch(r){case oe.campaign:return J(J({},e),{campaign:o});case oe.offline:return J(J({},e),{offline:!0});case oe.online:return J(J({},e),{offline:!1});default:return n?e:J(J(J({},Te),e),{initialized:!0})}}var Ce=["plugins","reducers","storage"];function Le(t){var e=function(e,t,n){var r;F.isBrowser&&(r=window[(n?"add":"remove")+"EventListener"],e.split(" ").forEach(function(e){r(e,t)}))}.bind(null,"online offline",function(e){return Promise.resolve(!navigator.onLine).then(t)});return e(!0),1}function Me(){var i=f+l+f;return z.set(i,[]),function(o){return function(e,t,n){var n=o(e,t,n),r=n.dispatch;return Object.assign(n,{dispatch:function(e){var t=e.action||e;return z.globalContext[i].push(t),r(e)}})}}}function Re(){return function(){return X(X.apply(null,arguments),Me())}}function Ue(e){return e?F.isArray(e)?e:[e]:[]}function De(e,t,n){var r,o,i=0<arguments.length&&void 0!==e?e:{},e=1<arguments.length?t:void 0,t=2<arguments.length?n:void 0,n=q.uuid();return e&&(x[n]=(r=e,o=function(e){for(var t,n=e||Array.prototype.slice.call(arguments),r=0;r<n.length;r++)if(F.isFunction(n[r])){t=n[r];break}return t}(t),function(e){o&&o(e),r(e)})),J(J({},i),{},{rid:n,ts:(new Date).getTime()},e?{hasCallback:!0}:{})}function Be(){function e(){return c}function u(){throw new Error("Abort disabled inListener")}var r,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},n=t.reducers||{},o=t.initialUser||{},a=(t.plugins||[]).reduce(function(e,n){if(F.isFunction(n))return e.middlewares=e.middlewares.concat(n),e;if(n.NAMESPACE&&(n.name=n.NAMESPACE),!n.name)throw new Error("https://lytics.dev/errors/1");var t=n.EVENTS?Object.keys(n.EVENTS).map(function(e){return n.EVENTS[e]}):[],r=!(!1===n.enabled),o=!(n.config&&!1===n.config.enabled);e.pluginEnabled[n.name]=r&&o,delete n.enabled,n.methods&&(e.methods[n.name]=Object.keys(n.methods).reduce(function(e,t){var r;return e[t]=(r=n.methods[t],function(){for(var e=Array.prototype.slice.call(arguments),t=new Array(r.length),n=0;n<e.length;n++)t[n]=e[n];return t[t.length]=A,r.apply({instance:A},t)}),e},{}),delete n.methods);t=Object.keys(n).concat(t),t=new Set(e.events.concat(t));if(e.events=Array.from(t),e.pluginsArray=e.pluginsArray.concat(n),e.plugins[n.name])throw new Error(n.name+"AlreadyLoaded");return e.plugins[n.name]=n,e.plugins[n.name].loaded||(e.plugins[n.name].loaded=function(){return!0}),e},{plugins:{},pluginEnabled:{},methods:{},pluginsArray:[],middlewares:[],events:[]}),i=t.storage||{getItem:z.get,setItem:z.set,removeItem:z.remove},l=(r=i,function(e,t,n){t=t.getState("user")[e];if(t)return t;if(n&&F.isObject(n)&&n[e])return n[e];n=ce(r)[e];return n||z.get(se(e))||null}),c=a.plugins,s=a.events.filter(function(e){return!re.includes(e)}).sort(),f=new Set(s.concat(ne).filter(function(e){return!re.includes(e)})),d=Array.from(f).sort(),p=new ve,g=p.addMiddleware,v=p.removeMiddleware,y=p.dynamicMiddlewares,h=q.paramsParse(),m=ce(i),f=J(J(J(J({},m),o),h.an_uid?{userId:h.an_uid}:{}),h.an_aid?{anonymousId:h.an_aid}:{});f.anonymousId||(f.anonymousId=q.uuid());var b,w,x,O,k,j,S,E,I,_,P,p=J({enable:function(t,n){return new Promise(function(e){L.dispatch({type:oe.enablePlugin,plugins:Ue(t),_:{originalAction:oe.enablePlugin}},e,[n])})},disable:function(t,n){return new Promise(function(e){L.dispatch({type:oe.disablePlugin,plugins:Ue(t),_:{originalAction:oe.disablePlugin}},e,[n])})}},a.methods),A={identify:(x=Z(G.mark(function e(t,n,r,o){var i,a,u,c,s;return G.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=F.isString(t)?t:null,a=F.isObject(t)?t:n,u=r||{},c=A.user(),z.set(se(Y),i),s=i||a.userId||l(Y,A,a),e.abrupt("return",new Promise(function(e){L.dispatch(J({type:oe.identifyStart,userId:s,traits:a||{},options:u,anonymousId:c.anonymousId},c.id&&c.id!==i&&{previousId:c.id}),e,[n,r,o])}));case 7:case"end":return e.stop()}},e)})),function(e,t,n,r){return x.apply(this,arguments)}),track:(w=Z(G.mark(function e(t,n,r,o){var i,a,u;return G.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if((i=F.isObject(t)?t.event:t)&&F.isString(i)){e.next=3;break}throw new Error("EventMissing");case 3:return a=F.isObject(t)?t:n||{},u=F.isObject(r)?r:{},e.abrupt("return",new Promise(function(e){L.dispatch({type:oe.trackStart,event:i,properties:a,options:u,userId:l(Y,A,n),anonymousId:l(K,A,n)},e,[n,r,o])}));case 6:case"end":return e.stop()}},e)})),function(e,t,n,r){return w.apply(this,arguments)}),page:(b=Z(G.mark(function e(t,n,r){var o,i;return G.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=F.isObject(t)?t:{},i=F.isObject(n)?n:{},e.abrupt("return",new Promise(function(e){L.dispatch({type:oe.pageStart,properties:Ee(o),options:i,userId:l(Y,A,o),anonymousId:l(K,A,o)},e,[t,n,r])}));case 3:case"end":return e.stop()}},e)})),function(e,t,n){return b.apply(this,arguments)}),user:function(e){if(e===Y||"id"===e)return l(Y,A);if(e===K||"anonId"===e)return l(K,A);var t=A.getState("user");return e?q.dotProp(t,e):t},reset:function(t){return new Promise(function(e){L.dispatch({type:oe.resetStart},e,t)})},ready:function(e){return A.on(oe.ready,e)},on:function(n,r){if(!n||!F.isFunction(r))return!1;if(n===oe.bootstrap)throw new Error(".on disabled for "+n);var o=/Start$|Start:/;if("*"===n){var e=function(e){return function(t){return function(e){return e.type.match(o)&&r({payload:e,instance:A,plugins:c}),t(e)}}},t=function(e){return function(t){return function(e){return e.type.match(o)||r({payload:e,instance:A,plugins:c}),t(e)}}};return g(e,qe),g(t,ze),function(){v(e,qe),v(t,ze)}}function i(e){return function(t){return function(e){return e.type===n&&r({payload:e,instance:A,plugins:c,abort:u}),t(e)}}}var a=n.match(o)?qe:ze;return g(i,a),function(){return v(i,a)}},once:function(e,t){if(!e||!F.isFunction(t))return!1;if(e===oe.bootstrap)throw new Error(".once disabled for "+e);var n=A.on(e,function(e){e=e.payload;t({payload:e,instance:A,plugins:c,abort:u}),n()});return n},getState:function(e){var t=L.getState();return e?q.dotProp(t,e):Object.assign({},t)},dispatch:function(e){var t,n=F.isString(e)?{type:e}:e;if(t=n.type,ne.includes(t))throw new Error("reserved action "+n.type);e=e._||{},e=J(J({},n),{},{_:J({originalAction:n.type},e)});L.dispatch(e)},enablePlugin:p.enable,disablePlugin:p.disable,plugins:p,storage:{getItem:i.getItem,setItem:function(e,t,n){L.dispatch({type:oe.setItemStart,key:e,value:t,options:n})},removeItem:function(e,t){L.dispatch({type:oe.removeItemStart,key:e,options:t})}},setAnonymousId:function(e,t){A.storage.setItem(Q,e,t)},events:{all:d,core:ne,plugins:s}},s=a.middlewares.concat([function(e){return function(t){return function(e){return e.meta||(e.meta=De()),t(e)}}},y(qe),ge(A,e,{all:d,plugins:s}),(I=i,function(e){return function(i){return function(e){var t=e.type,n=e.key,r=e.value,o=e.options;if(t===oe.setItem||t===oe.removeItem){if(e.abort)return i(e);t===oe.setItem?I.setItem(n,r,o):I.removeItem(n,o)}return i(e)}}}),(E=(S=A).storage.setItem,function(l){return function(s){return function(e){var r,t,n,o,i,a,u,c;return e.type===oe.bootstrap&&(r=e.params,t=e.user,n=e.persistedUser,i=e.initialUser,o=n.userId===t.userId,n.anonymousId!==t.anonymousId&&E(Q,t.anonymousId),o||E(ee,t.userId),i.traits&&E(te,J(J({},o&&n.traits?n.traits:{}),i.traits)),(i=Object.keys(e.params)).length&&(a=r.an_uid,u=r.an_event,c=i.reduce(function(e,t){var n;return(t.match(ie)||t.match(/^(d|g)clid/))&&(n=t.replace(ie,""),e.campaign["campaign"===n?"name":n]=r[t]),t.match(ae)&&(e.props[t.replace(ae,"")]=r[t]),t.match(ue)&&(e.traits[t.replace(ue,"")]=r[t]),e},{campaign:{},props:{},traits:{}}),l.dispatch(J(J({type:oe.params,raw:r},c),a?{userId:a}:{})),a&&setTimeout(function(){return S.identify(a,c.traits)},0),u&&setTimeout(function(){return S.track(u,c.props)},0),Object.keys(c.campaign).length&&l.dispatch({type:oe.campaign,campaign:c.campaign}))),s(e)}}}),(O=(d=(d=A).storage).setItem,k=d.removeItem,j=d.getItem,function(u){return function(a){return function(e){var t,n,r=e.userId,o=e.traits,i=e.options;return e.type===oe.reset&&([ee,te,Q].forEach(function(e){k(e)}),[Y,K,"traits"].forEach(function(e){z.remove(se(e))})),e.type===oe.identify&&(j(Q)||O(Q,q.uuid()),t=j(ee),n=j(te)||{},t&&t!==r&&u.dispatch({type:oe.userIdChanged,old:{userId:t,traits:n},new:{userId:r,traits:o},options:i}),r&&O(ee,r),o&&O(te,J(J({},n),o))),a(e)}}}),y(ze)]),d={context:Ne,user:(P=i,function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if(t.type===oe.setItemEnd){if(t.key===Q)return J(J({},e),{anonymousId:t.value});if(t.key===ee)return J(J({},e),{userId:t.value})}switch(t.type){case oe.identify:return Object.assign({},e,{userId:t.userId,traits:J(J({},e.traits),t.traits)});case oe.reset:return[ee,Q,te].forEach(function(e){P.removeItem(e)}),Object.assign({},e,{userId:null,anonymousId:null,traits:{}});default:return e}}),page:_e,track:xe,plugins:(_=e,function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=1<arguments.length?arguments[1]:void 0,n={};if("initialize:aborted"===t.type)return e;if(/^registerPlugin:([^:]*)$/.test(t.type)){var r=he(t.type,"registerPlugin"),o=_()[r];if(!o||!r)return e;var i=t.enabled;return n[r]={enabled:i,initialized:!!i&&Boolean(!o.initialize),loaded:!!i&&Boolean(o.loaded()),config:o.config||{}},J(J({},e),n)}if(/^initialize:([^:]*)$/.test(t.type)){i=he(t.type,oe.initialize),o=_()[i];return o&&i?(n[i]=J(J({},e[i]),{initialized:!0,loaded:Boolean(o.loaded())}),J(J({},e),n)):e}if(/^ready:([^:]*)$/.test(t.type))return n[t.name]=J(J({},e[t.name]),{loaded:!0}),J(J({},e),n);switch(t.type){case oe.disablePlugin:return J(J({},e),me(t.plugins,!1,e));case oe.enablePlugin:return J(J({},e),me(t.plugins,!0,e));default:return e}}),queue:ke},y=X,i=X;F.isBrowser&&t.debug&&((C=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__)&&(y=C({trace:!0,traceLimit:25})),i=function(){return 0===arguments.length?Me():F.isObject($(arguments[0]))?Re():Re().apply(null,arguments)});var T,N,C=(T=t,Object.keys(T).reduce(function(e,t){return Ce.includes(t)||(e[t]=T[t]),e},{})),t={context:C,user:f,plugins:a.pluginsArray.reduce(function(e,t){var n=t.name,r=t.config,o=t.loaded,i=a.pluginEnabled[n];return e[n]={enabled:i,initialized:!!i&&Boolean(!t.initialize),loaded:Boolean(o()),config:r||{}},e},{})},L=H(W(J(J({},d),n)),t,i(y(function(){for(var e=arguments.length,a=new Array(e),t=0;t<e;t++)a[t]=arguments[t];return function(i){return function(e,t,n){var t=i(e,t,n),r=t.dispatch,o={getState:t.getState,dispatch:function(e){return r(e)}},n=a.map(function(e){return e(o)}),r=X.apply(void 0,V(n))(t.dispatch);return J(J({},t),{},{dispatch:r})}}}.apply(void 0,V(s)))));L.dispatch=(N=L.dispatch,function(e,t,n){n=De(e.meta,t,Ue(n)),n=J(J({},e),{meta:n});return N.apply(null,[n])});s=Object.keys(c);L.dispatch({type:oe.bootstrap,plugins:s,config:C,params:h,user:f,initialUser:o,persistedUser:m});var M,R,U,D=s.filter(function(e){return a.pluginEnabled[e]}),B=s.filter(function(e){return!a.pluginEnabled[e]});return L.dispatch({type:oe.registerPlugins,plugins:s,enabled:a.pluginEnabled}),a.pluginsArray.map(function(e,t){var n=e.bootstrap,r=e.config,o=e.name;n&&F.isFunction(n)&&n({instance:A,config:r,payload:e}),L.dispatch({type:oe.registerPluginType(o),name:o,enabled:a.pluginEnabled[o],plugin:e}),a.pluginsArray.length===t+1&&L.dispatch({type:oe.initializeStart,plugins:D,disabled:B})}),Le(function(e){L.dispatch({type:e?oe.offline:oe.online})}),M=L,R=e,U=A,setInterval(function(){return le(M,R,U)},3e3),A}var qe="before",ze="after";n.default=Be,n.init=Be,n.Analytics=Be,n.EVENTS=oe,n.CONSTANTS=w},{"@analytics/global-storage-utils":3,"@analytics/type-utils":7,"analytics-utils":8}],3:[function(e,t,r){!function(e){!function(){var n="object"==typeof self&&self.self===self&&self||"object"==typeof e&&e.global===e&&e||void 0;function t(e,t){return n[e]=t}r.get=function(e){return n[e]},r.globalContext=n,r.remove=function(e){t(e)},r.set=t,r.undef="undefined"}.call(this)}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],4:[function(e,t,n){var i=e("@analytics/type-utils");function r(o){return function(e,t,n,r){var c=n||i.noOp;if(!i.isBrowser)return c;var s=r||!1,l=a(t),f=a(e,!0),d=[];if(!f.length)throw new Error("noElements");if(!l.length)throw new Error("noEvent");return function e(t){var n=t?"addEventListener":"removeEventListener";t&&(d=[]);for(var r,o,i=0;i<f.length;i++){var a=f[i];d[i]=t?(r=c,(o=s)&&o.once?p(r):r):d[i]||c;for(var u=0;u<l.length;u++)a[n]?a[n](l[u],d[i],s):a["on"+l[u]]=t?d[i]:null}return e.bind(null,!t)}(o)}}function a(e,t){if(i.isString(e))return t?a(document.querySelectorAll(e)):e.split(" ").map(function(e){return e.trim()});if(NodeList.prototype.isPrototypeOf(e)){for(var n=[],r=e.length>>>0;r--;)n[r]=e[r];return n}return i.isArray(e)?e:[e]}function p(e,t){var n;return function(){return e&&(n=e.apply(t||this,arguments),e=null),n}}var o=r("Event"),e=r();n.addListener=o,n.once=p,n.removeListener=e},{"@analytics/type-utils":7}],5:[function(e,t,n){var r=e("@analytics/global-storage-utils"),o=i();function i(){if(typeof o!==r.undef)return o;o=!0;try{typeof localStorage!==r.undef&&typeof JSON!==r.undef||(o=!1),localStorage.setItem(r.undef,r.undef),localStorage.removeItem(r.undef)}catch(e){o=!1}return o}n.getItem=function(e){return o?localStorage.getItem(e):r.get(e)},n.hasLocalStorage=i,n.removeItem=function(e){return o?localStorage.removeItem(e):r.remove(e)},n.setItem=function(e,t){return o?localStorage.setItem(e,t):r.set(e,t)}},{"@analytics/global-storage-utils":3}],6:[function(e,t,n){var a=e("@analytics/global-storage-utils"),u=e("@analytics/cookie-utils"),r=e("@analytics/localstorage-utils"),c=e("@analytics/type-utils");function s(e){var t=e;try{if("true"===(t=JSON.parse(e)))return!0;if("false"===t)return!1;if(c.isObject(t))return t;parseFloat(t)===t&&(t=parseFloat(t))}catch(e){}if(null!==t&&""!==t)return t}var o=r.hasLocalStorage(),i=u.hasCookies();function l(e,t){if(e){var n=p(t),r=!y(n),t=g(n)?s(localStorage.getItem(e)):void 0;if(r&&!c.isUndefined(t))return t;n=v(n)?s(u.getCookie(e)):void 0;if(r&&n)return n;e=a.get(e);return r?e:{localStorage:t,cookie:n,global:e}}}function f(e,t,n){if(e&&!c.isUndefined(t)){var r={},o=p(n),i=JSON.stringify(t),n=!y(o);return g(o)&&(r.localStorage={location:"localStorage",current:t,previous:s(localStorage.getItem(e))},localStorage.setItem(e,i),n)?r.localStorage:v(o)&&(r.cookie={location:"cookie",current:t,previous:s(u.getCookie(e))},u.setCookie(e,i),n)?r.cookie:(r.global={location:"global",current:t,previous:a.get(e)},a.set(e,t),n?r.global:r)}}function d(e,t){if(e){var n=p(t),r=l(e,"*"),t={};return!c.isUndefined(r.localStorage)&&g(n)&&(localStorage.removeItem(e),t.localStorage=r.localStorage),!c.isUndefined(r.cookie)&&v(n)&&(u.removeCookie(e),t.cookie=r.cookie),!c.isUndefined(r.global)&&h(n,"global")&&(a.remove(e),t.global=r.global),t}}function p(e){return e?c.isString(e)?e:e.storage:"any"}function g(e){return o&&h(e,"localStorage")}function v(e){return i&&h(e,"cookie")}function y(e){return"*"===e||"all"===e}function h(e,t){return"any"===e||e===t||y(e)}e={setItem:f,getItem:l,removeItem:d};Object.defineProperty(n,"globalContext",{enumerable:!0,get:function(){return a.globalContext}}),Object.defineProperty(n,"getCookie",{enumerable:!0,get:function(){return u.getCookie}}),Object.defineProperty(n,"hasCookies",{enumerable:!0,get:function(){return u.hasCookies}}),Object.defineProperty(n,"removeCookie",{enumerable:!0,get:function(){return u.removeCookie}}),Object.defineProperty(n,"setCookie",{enumerable:!0,get:function(){return u.setCookie}}),Object.defineProperty(n,"hasLocalStorage",{enumerable:!0,get:function(){return r.hasLocalStorage}}),n.ALL="*",n.ANY="any",n.COOKIE="cookie",n.GLOBAL="global",n.LOCAL_STORAGE="localStorage",n.default=e,n.getItem=l,n.removeItem=d,n.setItem=f},{"@analytics/cookie-utils":1,"@analytics/global-storage-utils":3,"@analytics/localstorage-utils":5,"@analytics/type-utils":7}],7:[function(e,t,n){function r(){}var o="undefined"!=typeof window;function i(e){return"function"==typeof e}function a(e){return"string"==typeof e}function u(e){return e instanceof Element||e instanceof HTMLDocument}n.ARRAY="array",n.BOOLEAN="boolean",n.FUNCTION="function",n.NUMBER="number",n.OBJECT="object",n.STRING="string",n.UNDEFINED="undefined",n.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)},n.isBoolean=function(e){return"boolean"==typeof e},n.isBrowser=o,n.isElement=u,n.isEmail=function(e){return!(320<e.length)&&/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/.test(e)},n.isForm=function(e){return u(e)&&"FORM"===e.nodeName},n.isFunction=i,n.isHidden=function(e,t){if(!e||"hidden"===getComputedStyle(e).visibility)return!0;for(;e;){if(null!=t&&e===t)return!1;if("none"===getComputedStyle(e).display)return!0;e=e.parentElement}return!1},n.isNoOp=function(e){if(!i(e))return!1;var t=/{(\r|\n|\s)*}/gm,n=r.toString();return n===(e.toString().match(t)||[""])[0].replace(t,n)},n.isNodeList=function(e){return NodeList.prototype.isPrototypeOf(e)},n.isNull=function(e){return null===e},n.isNumber=function(e){return"number"==typeof e&&!isNaN(e)},n.isObject=function(e){if("object"!=typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t},n.isRegex=function(e){return e instanceof RegExp},n.isString=a,n.isTruthy=function(e){return!(a(e)&&"false"===e.toLowerCase()||!e)},n.isUndefined=function(e){return void 0===e},n.noOp=r},{}],8:[function(e,t,n){var r=e("dlv"),i=e("@analytics/type-utils");var o=(r=r)&&"object"==typeof r&&"default"in r?r:{default:r};function u(e){try{return decodeURIComponent(e.replace(/\+/g," "))}catch(e){return null}}function a(e){if(!i.isBrowser)return!1;var t=e||document.referrer;if(t){e=window.document.location.port,t=t.split("/")[2];return(t=e?t.replace(":"+e,""):t)!==window.location.hostname}return!1}function c(e,t){var n=(e.split("?")||[,])[1];if(!n||-1===n.indexOf(t))return e;t=new RegExp("(\\&|\\?)"+t+'([_A-Za-z0-9"+=.\\/\\-@%]+)',"g"),t=("?"+n).replace(t,"").replace(/^&/,"?");return e.replace("?"+n,t)}function s(t){return function(e){for(var t,n=Object.create(null),r=/([^&=]+)=?([^&]*)/g;i=r.exec(e);){var o=u(i[1]),i=u(i[2]);"[]"===o.substring(o.length-2)?(n[o=o.substring(0,o.length-2)]||(n[o]=[])).push(i):n[o]=""===i||i}for(t in n){var a=t.split("[");1<a.length&&(function(e,t,n){for(var r=t.length-1,o=0;o<r;++o){var i=t[o];if("__proto__"===i||"constructor"===i)break;i in e||(e[i]={}),e=e[i]}e[t[r]]=n}(n,a.map(function(e){return e.replace(/[?[\]\\ ]/g,"")}),n[t]),delete n[t])}return n}(function(){if(t){var e=t.match(/\?(.*)/);return e&&e[1]?e[1].split("#")[0]:""}return i.isBrowser&&window.location.search.substring(1)}())}function l(e){if(!i.isBrowser)return null;var t=document.createElement("a");return t.setAttribute("href",e),t.hostname}function f(e){return(l(e)||"").split(".").slice(-2).join(".")}function d(e){var t=e.split(".");return 1<t.length?t.slice(0,-1).join("."):e}var r={trimTld:d,getDomainBase:f,getDomainHost:l},p={"daum.net":"q","eniro.se":"search_word","naver.com":"query","yahoo.com":"p","msn.com":"q","aol.com":"q","ask.com":"q","baidu.com":"wd","yandex.com":"text","rambler.ru":"words",google:"q","bing.com":{p:"q",n:"live"}};Object.defineProperty(n,"dotProp",{enumerable:!0,get:function(){return o.default}}),n.decodeUri=u,n.getBrowserLocale=function(){if(i.isBrowser){var e=navigator,t=e.languages;return e.userLanguage||(t&&t.length?t[0]:e.language)}},n.getTimeZone=function(){try{return Intl.DateTimeFormat().resolvedOptions().timeZone}catch(e){}},n.isExternalReferrer=a,n.isScriptLoaded=function(t){if(!i.isBrowser)return!0;var n=document.getElementsByTagName("script");return!!Object.keys(n).filter(function(e){e=n[e].src;return i.isString(t)?-1!==e.indexOf(t):!!i.isRegex(t)&&e.match(t)}).length},n.paramsClean=c,n.paramsGet=function(e,t){return u((RegExp(e+"=(.+?)(&|$)").exec(t)||[,""])[1])},n.paramsParse=s,n.paramsRemove=function(r,o){return i.isBrowser?new Promise(function(e,t){var n;return window.history&&window.history.replaceState&&((n=window.location.href)!==(n=c(n,r))&&history.replaceState({},"",n)),o&&o(),e()}):Promise.resolve()},n.parseReferrer=function(e,t){if(!i.isBrowser)return!1;var n={source:"(direct)",medium:"(none)",campaign:"(not set)"};e&&a(e)&&(n.referrer=e);e=function(e){if(!e||!i.isBrowser)return!1;var t=f(e),n=document.createElement("a");if(n.href=e,-1<n.hostname.indexOf("google")&&(t="google"),p[t]){var r=p[t],o=new RegExp(("string"==typeof r?r:r.p)+"=.*?([^&#]*|$)","gi"),o=n.search.match(o);return{source:r.n||d(t),medium:"organic",term:(o?o[0].split("=")[1]:"")||"(not provided)"}}e=a(e)?"referral":"internal";return{source:n.hostname,medium:e}}(e);e&&Object.keys(e).length&&(n=Object.assign({},n,e));var r=s(t),t=Object.keys(r);if(!t.length)return n;t=t.reduce(function(e,t){return t.match(/^utm_/)&&(e[""+t.replace(/^utm_/,"")]=r[t]),t.match(/^(d|g)clid/)&&(e.source="google",e.medium=r.gclid?"cpc":"cpm",e[t]=r[t]),e},{});return Object.assign({},n,t)},n.throttle=function(n,r){function o(){s=new Date,c=null,u=n.apply(i,a)}var i,a,u,c=null,s=0;return function(){var e=new Date,t=r-(e-(s=s||e));return i=this,a=arguments,t<=0?(clearTimeout(c),c=null,s=e,u=n.apply(i,a)):c=c||setTimeout(o,t),u}},n.url=r,n.uuid=function(){for(var e="",t=0,n=4294967295*Math.random()|0;t++<36;){var r="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx"[t-1],o=15&n;e+="-"==r||"4"==r?r:("x"==r?o:3&o|8).toString(16),n=t%8==0?4294967295*Math.random()|0:n>>4}return e}},{"@analytics/type-utils":7,dlv:10}],9:[function(e,t,n){"use strict";function r(e){return e&&"object"==typeof e&&"default"in e?e.default:e}Object.defineProperty(n,"__esModule",{value:!0});var o=e("@analytics/core"),i=r(o),a=r(e("@analytics/storage-utils"));var u=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e};function c(t,e){var n,r=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)),r}var s=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?c(n,!0).forEach(function(e){u(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):c(n).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t};function l(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return i(s(s({},{storage:a}),e))}n.EVENTS=o.EVENTS,n.CONSTANTS=o.CONSTANTS,n.default=l,n.init=l,n.Analytics=l},{"@analytics/core":2,"@analytics/storage-utils":6}],10:[function(e,t,n){var r;r=this,"object"==typeof n&&void 0!==t?t.exports=function(e,t,n,r,o){for(t=t.split?t.split("."):t,r=0;r<t.length;r++)e=e?e[t[r]]:o;return e===o?n:e}:r.dlv=function(e,t,n,r,o){for(t=t.split?t.split("."):t,r=0;r<t.length;r++)e=e?e[t[r]]:o;return e===o?n:e}},{}],11:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"v1",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(n,"v3",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(n,"v4",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(n,"v5",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(n,"NIL",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(n,"version",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(n,"validate",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(n,"stringify",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(n,"parse",{enumerable:!0,get:function(){return f.default}});var r=d(e("./v1.js")),o=d(e("./v3.js")),i=d(e("./v4.js")),a=d(e("./v5.js")),u=d(e("./nil.js")),c=d(e("./version.js")),s=d(e("./validate.js")),l=d(e("./stringify.js")),f=d(e("./parse.js"));function d(e){return e&&e.__esModule?e:{default:e}}},{"./nil.js":13,"./parse.js":14,"./stringify.js":18,"./v1.js":19,"./v3.js":20,"./v4.js":22,"./v5.js":23,"./validate.js":24,"./version.js":25}],12:[function(e,t,n){"use strict";function l(e){return 14+(e+64>>>9<<4)+1}function f(e,t){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}function u(e,t,n,r,o,i){return f((i=f(f(t,e),f(r,i)))<<o|i>>>32-o,n)}function d(e,t,n,r,o,i,a){return u(t&n|~t&r,e,t,o,i,a)}function p(e,t,n,r,o,i,a){return u(t&r|n&~r,e,t,o,i,a)}function g(e,t,n,r,o,i,a){return u(t^n^r,e,t,o,i,a)}function v(e,t,n,r,o,i,a){return u(n^(t|~r),e,t,o,i,a)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0,n.default=function(t){if("string"==typeof t){const n=unescape(encodeURIComponent(t));t=new Uint8Array(n.length);for(let e=0;e<n.length;++e)t[e]=n.charCodeAt(e)}return function(t){const n=[],r=32*t.length,o="0123456789abcdef";for(let e=0;e<r;e+=8){var i=t[e>>5]>>>e%32&255,i=parseInt(o.charAt(i>>>4&15)+o.charAt(15&i),16);n.push(i)}return n}(function(t,e){t[e>>5]|=128<<e%32,t[l(e)-1]=e;let n=1732584193,r=-271733879,o=-1732584194,i=271733878;for(let e=0;e<t.length;e+=16){var a=n,u=r,c=o,s=i;n=d(n,r,o,i,t[e],7,-680876936),i=d(i,n,r,o,t[e+1],12,-389564586),o=d(o,i,n,r,t[e+2],17,606105819),r=d(r,o,i,n,t[e+3],22,-1044525330),n=d(n,r,o,i,t[e+4],7,-176418897),i=d(i,n,r,o,t[e+5],12,1200080426),o=d(o,i,n,r,t[e+6],17,-1473231341),r=d(r,o,i,n,t[e+7],22,-45705983),n=d(n,r,o,i,t[e+8],7,1770035416),i=d(i,n,r,o,t[e+9],12,-1958414417),o=d(o,i,n,r,t[e+10],17,-42063),r=d(r,o,i,n,t[e+11],22,-1990404162),n=d(n,r,o,i,t[e+12],7,1804603682),i=d(i,n,r,o,t[e+13],12,-40341101),o=d(o,i,n,r,t[e+14],17,-1502002290),r=d(r,o,i,n,t[e+15],22,1236535329),n=p(n,r,o,i,t[e+1],5,-165796510),i=p(i,n,r,o,t[e+6],9,-1069501632),o=p(o,i,n,r,t[e+11],14,643717713),r=p(r,o,i,n,t[e],20,-373897302),n=p(n,r,o,i,t[e+5],5,-701558691),i=p(i,n,r,o,t[e+10],9,38016083),o=p(o,i,n,r,t[e+15],14,-660478335),r=p(r,o,i,n,t[e+4],20,-405537848),n=p(n,r,o,i,t[e+9],5,568446438),i=p(i,n,r,o,t[e+14],9,-1019803690),o=p(o,i,n,r,t[e+3],14,-187363961),r=p(r,o,i,n,t[e+8],20,1163531501),n=p(n,r,o,i,t[e+13],5,-1444681467),i=p(i,n,r,o,t[e+2],9,-51403784),o=p(o,i,n,r,t[e+7],14,1735328473),r=p(r,o,i,n,t[e+12],20,-1926607734),n=g(n,r,o,i,t[e+5],4,-378558),i=g(i,n,r,o,t[e+8],11,-2022574463),o=g(o,i,n,r,t[e+11],16,1839030562),r=g(r,o,i,n,t[e+14],23,-35309556),n=g(n,r,o,i,t[e+1],4,-1530992060),i=g(i,n,r,o,t[e+4],11,1272893353),o=g(o,i,n,r,t[e+7],16,-155497632),r=g(r,o,i,n,t[e+10],23,-1094730640),n=g(n,r,o,i,t[e+13],4,681279174),i=g(i,n,r,o,t[e],11,-358537222),o=g(o,i,n,r,t[e+3],16,-722521979),r=g(r,o,i,n,t[e+6],23,76029189),n=g(n,r,o,i,t[e+9],4,-640364487),i=g(i,n,r,o,t[e+12],11,-421815835),o=g(o,i,n,r,t[e+15],16,530742520),r=g(r,o,i,n,t[e+2],23,-995338651),n=v(n,r,o,i,t[e],6,-198630844),i=v(i,n,r,o,t[e+7],10,1126891415),o=v(o,i,n,r,t[e+14],15,-1416354905),r=v(r,o,i,n,t[e+5],21,-57434055),n=v(n,r,o,i,t[e+12],6,1700485571),i=v(i,n,r,o,t[e+3],10,-1894986606),o=v(o,i,n,r,t[e+10],15,-1051523),r=v(r,o,i,n,t[e+1],21,-2054922799),n=v(n,r,o,i,t[e+8],6,1873313359),i=v(i,n,r,o,t[e+15],10,-30611744),o=v(o,i,n,r,t[e+6],15,-1560198380),r=v(r,o,i,n,t[e+13],21,1309151649),n=v(n,r,o,i,t[e+4],6,-145523070),i=v(i,n,r,o,t[e+11],10,-1120210379),o=v(o,i,n,r,t[e+2],15,718787259),r=v(r,o,i,n,t[e+9],21,-343485551),n=f(n,a),r=f(r,u),o=f(o,c),i=f(i,s)}return[n,r,o,i]}(function(t){if(0===t.length)return[];const n=8*t.length,r=new Uint32Array(l(n));for(let e=0;e<n;e+=8)r[e>>5]|=(255&t[e/8])<<e%32;return r}(t),8*t.length))}},{}],13:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;n.default="00000000-0000-0000-0000-000000000000"},{}],14:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=(e=e("./validate.js"))&&e.__esModule?e:{default:e};n.default=function(e){if(!(0,r.default)(e))throw TypeError("Invalid UUID");var t;const n=new Uint8Array(16);return n[0]=(t=parseInt(e.slice(0,8),16))>>>24,n[1]=t>>>16&255,n[2]=t>>>8&255,n[3]=255&t,n[4]=(t=parseInt(e.slice(9,13),16))>>>8,n[5]=255&t,n[6]=(t=parseInt(e.slice(14,18),16))>>>8,n[7]=255&t,n[8]=(t=parseInt(e.slice(19,23),16))>>>8,n[9]=255&t,n[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,n[11]=t/4294967296&255,n[12]=t>>>24&255,n[13]=t>>>16&255,n[14]=t>>>8&255,n[15]=255&t,n}},{"./validate.js":24}],15:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;n.default=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i},{}],16:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){if(!r&&(r="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto),!r))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return r(o)};let r;const o=new Uint8Array(16)},{}],17:[function(e,t,n){"use strict";function f(e,t){return e<<t|e>>>32-t}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0,n.default=function(n){var u=[1518500249,1859775393,2400959708,3395469782];const e=[1732584193,4023233417,2562383102,271733878,3285377520];if("string"==typeof n){const o=unescape(encodeURIComponent(n));n=[];for(let e=0;e<o.length;++e)n.push(o.charCodeAt(e))}else Array.isArray(n)||(n=Array.prototype.slice.call(n));n.push(128);var t=n.length/4+2,r=Math.ceil(t/16);const c=new Array(r);for(let t=0;t<r;++t){const i=new Uint32Array(16);for(let e=0;e<16;++e)i[e]=n[64*t+4*e]<<24|n[64*t+4*e+1]<<16|n[64*t+4*e+2]<<8|n[64*t+4*e+3];c[t]=i}c[r-1][14]=8*(n.length-1)/Math.pow(2,32),c[r-1][14]=Math.floor(c[r-1][14]),c[r-1][15]=8*(n.length-1)&4294967295;for(let a=0;a<r;++a){const l=new Uint32Array(80);for(let e=0;e<16;++e)l[e]=c[a][e];for(let e=16;e<80;++e)l[e]=f(l[e-3]^l[e-8]^l[e-14]^l[e-16],1);let t=e[0],n=e[1],r=e[2],o=e[3],i=e[4];for(let e=0;e<80;++e){var s=Math.floor(e/20),s=f(t,5)+function(e,t,n,r){switch(e){case 0:return t&n^~t&r;case 1:return t^n^r;case 2:return t&n^t&r^n&r;case 3:return t^n^r}}(s,n,r,o)+i+u[s]+l[e]>>>0;i=o,o=r,r=f(n,30)>>>0,n=t,t=s}e[0]=e[0]+t>>>0,e[1]=e[1]+n>>>0,e[2]=e[2]+r>>>0,e[3]=e[3]+o>>>0,e[4]=e[4]+i>>>0}return[e[0]>>24&255,e[0]>>16&255,e[0]>>8&255,255&e[0],e[1]>>24&255,e[1]>>16&255,e[1]>>8&255,255&e[1],e[2]>>24&255,e[2]>>16&255,e[2]>>8&255,255&e[2],e[3]>>24&255,e[3]>>16&255,e[3]>>8&255,255&e[3],e[4]>>24&255,e[4]>>16&255,e[4]>>8&255,255&e[4]]}},{}],18:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=(e=e("./validate.js"))&&e.__esModule?e:{default:e};const o=[];for(let e=0;e<256;++e)o.push((e+256).toString(16).substr(1));n.default=function(e,t=0){if(t=(o[e[t+0]]+o[e[t+1]]+o[e[t+2]]+o[e[t+3]]+"-"+o[e[t+4]]+o[e[t+5]]+"-"+o[e[t+6]]+o[e[t+7]]+"-"+o[e[t+8]]+o[e[t+9]]+"-"+o[e[t+10]]+o[e[t+11]]+o[e[t+12]]+o[e[t+13]]+o[e[t+14]]+o[e[t+15]]).toLowerCase(),!(0,r.default)(t))throw TypeError("Stringified UUID is invalid");return t}},{"./validate.js":24}],19:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var l=r(e("./rng.js")),f=r(e("./stringify.js"));function r(e){return e&&e.__esModule?e:{default:e}}let d,p,g=0,v=0;n.default=function(e,t,n){var r=t&&n||0;const o=t||new Array(16);let i=(e=e||{}).node||d,a=void 0!==e.clockseq?e.clockseq:p;null!=i&&null!=a||(s=e.random||(e.rng||l.default)(),null==i&&(i=d=[1|s[0],s[1],s[2],s[3],s[4],s[5]]),null==a&&(a=p=16383&(s[6]<<8|s[7])));let u=void 0!==e.msecs?e.msecs:Date.now(),c=void 0!==e.nsecs?e.nsecs:v+1;var s=u-g+(c-v)/1e4;if(s<0&&void 0===e.clockseq&&(a=a+1&16383),(s<0||u>g)&&void 0===e.nsecs&&(c=0),1e4<=c)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");g=u,v=c,p=a,u+=122192928e5,e=(1e4*(268435455&u)+c)%4294967296,o[r++]=e>>>24&255,o[r++]=e>>>16&255,o[r++]=e>>>8&255,o[r++]=255&e,e=u/4294967296*1e4&268435455,o[r++]=e>>>8&255,o[r++]=255&e,o[r++]=e>>>24&15|16,o[r++]=e>>>16&255,o[r++]=a>>>8|128,o[r++]=255&a;for(let e=0;e<6;++e)o[r+e]=i[e];return t||(0,f.default)(o)}},{"./rng.js":16,"./stringify.js":18}],20:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=o(e("./v35.js")),e=o(e("./md5.js"));function o(e){return e&&e.__esModule?e:{default:e}}e=(0,r.default)("v3",48,e.default);n.default=e},{"./md5.js":12,"./v35.js":21}],21:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,i,a){function t(e,t,n,r){if("string"==typeof e&&(e=function(t){t=unescape(encodeURIComponent(t));const n=[];for(let e=0;e<t.length;++e)n.push(t.charCodeAt(e));return n}(e)),16!==(t="string"==typeof t?(0,c.default)(t):t).length)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let o=new Uint8Array(16+e.length);if(o.set(t),o.set(e,t.length),o=a(o),o[6]=15&o[6]|i,o[8]=63&o[8]|128,n){r=r||0;for(let e=0;e<16;++e)n[r+e]=o[e];return n}return(0,u.default)(o)}try{t.name=e}catch(e){}return t.DNS=o,t.URL=s,t},n.URL=n.DNS=void 0;var u=r(e("./stringify.js")),c=r(e("./parse.js"));function r(e){return e&&e.__esModule?e:{default:e}}const o="6ba7b810-9dad-11d1-80b4-00c04fd430c8";n.DNS=o;const s="6ba7b811-9dad-11d1-80b4-00c04fd430c8";n.URL=s},{"./parse.js":14,"./stringify.js":18}],22:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=r(e("./rng.js")),i=r(e("./stringify.js"));function r(e){return e&&e.__esModule?e:{default:e}}n.default=function(e,t,n){const r=(e=e||{}).random||(e.rng||o.default)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){n=n||0;for(let e=0;e<16;++e)t[n+e]=r[e];return t}return(0,i.default)(r)}},{"./rng.js":16,"./stringify.js":18}],23:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=o(e("./v35.js")),e=o(e("./sha1.js"));function o(e){return e&&e.__esModule?e:{default:e}}e=(0,r.default)("v5",80,e.default);n.default=e},{"./sha1.js":17,"./v35.js":21}],24:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=(e=e("./regex.js"))&&e.__esModule?e:{default:e};n.default=function(e){return"string"==typeof e&&r.default.test(e)}},{"./regex.js":15}],25:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=(e=e("./validate.js"))&&e.__esModule?e:{default:e};n.default=function(e){if(!(0,r.default)(e))throw TypeError("Invalid UUID");return parseInt(e.substr(14,1),16)}},{"./validate.js":24}],26:[function(e,t,n){"use strict";function c(e,t,n,r,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(r,o)}function r(){var u;return u=regeneratorRuntime.mark(function e(t){var n,r,o,i,a,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.url,r=t.header,o=t.method,i=t.data,a=t.asBeacon,void 0===r&&(r={"Content-Type":"application/json"}),void 0===o&&(o="get"),!0!==(void 0!==a&&a)){e.next=8;break}a=new Blob([JSON.stringify(i)],{type:"application/json"}),navigator.sendBeacon(config.tracker.url.api+"/track",a),e.next=15;break;case 8:return e.next=10,fetch(n,{method:o,headers:r,body:JSON.stringify(i),credentials:"omit"});case 10:return u=e.sent,e.next=13,u.json();case 13:return u.data=e.sent,e.abrupt("return",u);case 15:case"end":return e.stop()}},e)}),(r=function(){var e=this,a=arguments;return new Promise(function(t,n){var r=u.apply(e,a);function o(e){c(r,t,n,o,i,"next",e)}function i(e){c(r,t,n,o,i,"throw",e)}o(void 0)})}).apply(this,arguments)}Object.defineProperty(n,"__esModule",{value:!0}),n.request=function(e){return r.apply(this,arguments)}},{}],27:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){return{time:function(){return{local:(new Date).toLocaleString(),tz:Intl.DateTimeFormat().resolvedOptions().timeZone}},page:function(){return{url:location.href,path:location.pathname,hash:location.hash,title:document.title,referer:function(){var e=document.referrer;if(e){var t=document.createElement("a");t.href=e;var n=document.createElement("a");if(n.href=document.URL,t.host!==n.host){e=t.search,n=void 0;if(e&&""!==e){for(var r,o=[],i=e.slice(1).split("&"),a=0;a<i.length;a++)r=i[a].split("="),o.push(r[0]),o[r[0]]=r[1];n=o.q||o.p,n=decodeURIComponent(n).replace(/\+/g," ")}return{host:t.host,query:n}}}return{host:null,query:null}}(),history:{length:history.length}}},screen:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){var e=(screen.orientation||{}).type||screen.mozOrientation||screen.msOrientation;return{width:screen.width,height:screen.height,innerWidth:innerWidth,innerHeight:innerHeight,availWidth:screen.availWidth,availHeight:screen.availHeight,colorDepth:screen.colorDepth,pixelDepth:screen.pixelDepth,orientation:void 0===e?"n/a":e}}),browser:function(){return"undefined"==typeof navigator?{}:{browser:{name:navigator.appName,engine:navigator.product,appVersion:navigator.appVersion,userAgent:navigator.userAgent,language:navigator.language,onLine:navigator.onLine,javaEnabled:navigator.javaEnabled(),cookieEnabled:navigator.cookieEnabled},device:{platform:navigator.platform}}},storage:function(){return localStorage},cookies:function(){return{cookies1:document.cookie,cookies2:decodeURIComponent(document.cookie.split(";"))}}}}},{}],28:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){return{build:function(e){var t=e.type,n=e.source;return{type:t,session:e.session,profile:e.profile,context:e.context,properties:e.properties,source:n,options:e.options}},dynamic:function(e,t){return{properties:e.properties,type:e.type,options:e.options,context:t}},static:function(e){return{metadata:e.metadata,source:e.source,context:e.context,profile:e.profile,session:e.session}}}}},{}],29:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(n,r){var o=(0,i.default)();null!==n&&(n.events||(n.events=null));return{add:function(e,t){null!==n?(null===n.events&&((n=o.static(e)).options=r.context,n.events=[]),n.events.push(o.dynamic(e,t))):console.error("[Trackardi] Missing container in EventsList.")},get:function(){return n},reset:function(){n={events:null}}}};var i=(e=e("./event"))&&e.__esModule?e:{default:e}},{"./event":28}],30:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=o(e("analytics")),e=o(e("./tracardi"));function o(e){return e&&e.__esModule?e:{default:e}}e=(0,r.default)({app:"tracardi",debug:!0,plugins:[(0,e.default)(options)]});n.default=e},{"./tracardi":31,analytics:9}],31:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){var s=(0,b.default)(),l=(0,m.default)(),n=!0,f=(0,w.default)({},window.response),d=(0,w.default)({},window.response),t="tracardi-session-id",a="tracardi-profile-id",u="tracardi-consent-id",c=(0,x.getItem)(a),o=(0,y.getCookie)(t);o||(o=(0,h.v4)(),(0,y.setCookie)(t,o,0),n=!1);function p(e){return!e||null===e||!!(t=e)&&t.constructor===Object&&0===Object.keys(e).length;var t}function g(e,t){var n,r={type:e.event,source:config.tracker.source,session:{id:o},profile:null!=c?{id:c}:null,context:{time:s.time()},properties:e.properties};return void 0!==t.browser&&!0!==(null==t?void 0:t.browser)||(r.context.browser=E(E({},r.context.browser),{},{local:s.browser()})),void 0!==t.screen&&!0!==(null==t?void 0:t.screen)||(r.context.screen=E(E({},r.context.screen),{},{local:s.screen()})),!0===(null==t?void 0:t.storage)&&(r.context.storage=E(E({},r.context.storage),{},{local:s.storage()})),!0===(null==t?void 0:t.cookies)&&(r.context.storage=E(E({},r.context.storage),{},{cookies:s.cookies()})),!0===(null==t?void 0:t.performance)&&"function"==typeof(null===(t=window)||void 0===t||null===(n=t.performance)||void 0===n?void 0:n.getEntriesByType)&&(n=window.performance.getEntriesByType("navigation"),Array.isArray(n)&&0<n.length&&(r.context.performance=n[0])),e.options&&(r.options=e.options),r}function v(e){e.response&&"object"===S(e.response.data)?console.error("[Tracker] "+e.response.data.detail):console.error("[Tracker] "+e.message)}var r={},i=function(){var t=j(regeneratorRuntime.mark(function e(n){var r,t,o,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=null,e.prev=1,e.next=4,(0,O.request)({method:"POST",url:n.tracker.url.api+"/track",data:f.get(),asBeacon:!1});case 4:r=e.sent,void 0===(null===(t=r)||void 0===t||null===(o=t.data)||void 0===o||null===(i=o.profile)||void 0===i?void 0:i.id)&&console.error("[Tracardi] /track must return profile id. No profile id returned."),c=r.data.profile.id,(0,x.setItem)(a,c),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),v(e.t0);case 13:documentReady(function(){if(null!==r&&void 0!==r.data&&Array.isArray(null===r||void 0===r||null===(t=r.data)||void 0===t?void 0:t.ux)&&(console.log("[Tracardi] UIX found."),r.data.ux.map(function(e){console.debug(e);var t,n=document.createElement(e.tag);for(t in e.props)n.setAttribute(t,e.props[t]);document.body.appendChild(n)})),void 0!==n.listeners&&void 0!==n.listeners.onContextReady){var e=n.listeners.onContextReady;if("function"!=typeof e)throw new TypeError("onContextReady must be a function.");if(null!==r&&void 0!==r.data){e({tracker:window.tracardi.default,helpers:window.tracardi.default.plugins.tracardi,context:r.data});var t=(0,x.getItem)(u)===r.data.profile.id;if(void 0!==r.data.source.consent&&null!==r.data.source.consent&&!0===r.data.source.consent&&!t&&void 0!==n.listeners.onConsentRequired){t=n.listeners.onConsentRequired;if("function"!=typeof t)throw new TypeError("onConsentRequired must be a function.");t({context:r.data,tracker:window.tracardi.default})}}else e({tracker:window.tracardi.default,helpers:window.tracardi.default.plugins.tracardi,context:null})}}),f.reset();case 15:case"end":return e.stop()}},e,null,[[1,10]])}));return function(e){return t.apply(this,arguments)}}();return{name:"tracardi",config:{tracker:e.tracker,listeners:e.listeners,context:e.context},methods:{track:function(){var r=j(regeneratorRuntime.mark(function e(t,n,r){var o,i,a,u,c;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a={},!0===(null===(c=config)||void 0===c||null===(o=c.tracker)||void 0===o||null===(i=o.context)||void 0===i?void 0:i.page)&&(a={page:s.page()}),u=g(n={event:t,properties:n||{}},config.tracker.context),(c=l.static(u)).options=window.response.context,c.events=[l.dynamic(u,a)],e.next=9,(0,O.request)({method:"POST",url:config.tracker.url.api+"/track",data:c,asBeacon:!0===(null==r?void 0:r.asBeacon)});case 9:return c=e.sent,e.abrupt("return",c);case 11:case"end":return e.stop()}},e)}));return function(e,t,n){return r.apply(this,arguments)}}(),onClick:function(e,t){return(0,k.addListener)(e,"click",t)},addListener:function(e,t,n){return(0,k.addListener)(e,t,n)},consentSubmitted:function(){(0,x.setItem)(u,c)}},initializeStart:function(e){var t=e.abort,e=e.config;return void 0===e?(console.error(" because config is undefined."),t("Cancel the initialize call because of config is undefined.")):void 0===e.tracker?(console.error("[Tracker] Tracker init stopped because config.tracker is undefined."),t("Cancel the initialize call because of config.tracker.source is undefined.")):void 0===e.tracker.source?(console.error("[Tracker] Tracker init stopped because config.tracker.source is undefined."),t("Cancel the initialize call because of config.tracker.source is undefined.")):void 0===e.tracker.url?(console.error("[Tracker] Tracker init stopped because config.tracker.url is undefined."),t("Cancel the initialize call because of config.tracker.url is undefined.")):void 0===e.tracker.url.api?(console.error("[Tracker] Tracker init stopped because config.tracker.url.api is undefined."),t("Cancel the initialize call because of config.tracker.url.api s undefined.")):(void 0===e.listeners&&(e.listeners={}),void(void 0===e.tracker.context&&(e.tracker.context={cookies:!1,storage:!1,screen:!0,page:!0,browser:!0})))},initialize:function(e){e=e.config;if(console.debug("[Tracker] Plugin init configuration",e),r={tracks:!1},(0,y.hasCookies)()){if(!n&&void 0!==e.listeners.onSessionSet){var t=e.listeners.onSessionSet;if("function"!=typeof t)throw new TypeError("onSessionSet must be a function.");t({session:{id:o},tracker:window.tracardi.default,helpers:window.tracardi.default.plugins.tracardi})}if(void 0!==e.listeners.onInit){t=e.listeners.onInit;if("function"!=typeof t)throw new TypeError("onInit must be a function.");t({session:{id:o},tracker:window.tracardi.default,helpers:window.tracardi.default.plugins.tracardi})}window.config=e}else if(console.error("[Tracker] Cookies disabled."),void 0!==e.listeners.onCookiesDisabled){e=e.listeners.onCookiesDisabled;if("function"!=typeof e)throw new TypeError("onSessionSet must be a function.");e({tracker:window.tracardi.default,helpers:window.tracardi.default.plugins.tracardi})}},track:function(e){var t,n,r=e.payload,o=e.config;if(void 0!==o&&void 0!==o.tracker&&void 0!==o.tracker.source){console.debug("[Tracker] Event track",r);var i,a,u=g(r,o.tracker.context),e={};if(void 0!==o.tracker.context.page&&!0!==o.tracker.context.page||(e={page:s.page()}),p(null==r||null===(t=r.options)||void 0===t?void 0:t.context)||(e=E(E({},e),null==r||null===(i=r.options)||void 0===i?void 0:i.context)),!0===(null==r||null===(n=r.options)||void 0===n?void 0:n.fire))try{d.add(l.build(u),e);var c=(0,O.request)({method:"POST",url:o.tracker.url.api+"/track",data:d.get(),asBeacon:!0===(null==r||null===(a=r.options)||void 0===a?void 0:a.asBeacon)});return console.warn("[Tracardi] Tracking with option `fire: true` will not trigger listeners such as onContextReady, onConsentRequired, etc."),d.reset(),c}catch(e){v(e)}else f.add(l.build(u),e)}else console.error("[Tracker] config.tracker.source undefined.")},trackEnd:function(e){e=e.config;r.tracks||(r.tracks=!0,console.debug("[Tracker] TrackEnd"),i(e))},loaded:function(){return!!window.tracardi}}};var y=e("@analytics/cookie-utils"),h=e("uuid"),m=r(e("./domain/event")),b=r(e("./domain/clientInfo")),w=r(e("./domain/eventsList")),x=e("@analytics/storage-utils"),O=e("./apiCall"),k=e("@analytics/listener-utils");function r(e){return e&&e.__esModule?e:{default:e}}function c(e,t,n,r,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(r,o)}function j(u){return function(){var e=this,a=arguments;return new Promise(function(t,n){var r=u.apply(e,a);function o(e){c(r,t,n,o,i,"next",e)}function i(e){c(r,t,n,o,i,"throw",e)}o(void 0)})}}function S(e){return(S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(t,e){var n,r=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)),r}function E(r){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?i(Object(o),!0).forEach(function(e){var t,n;t=r,e=o[n=e],n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(o)):i(Object(o)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(o,e))})}return r}},{"./apiCall":26,"./domain/clientInfo":27,"./domain/event":28,"./domain/eventsList":29,"@analytics/cookie-utils":1,"@analytics/listener-utils":4,"@analytics/storage-utils":6,uuid:11}]},{},[30])(30)});
//# sourceMappingURL=liliput.min.js.map