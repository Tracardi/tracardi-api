{"file_name": "docs/qa/how_to_pass_profile_id_from_domain_to_domain.md", "questions": ["What is the purpose of passing profile ID in the URL between owned domains?"], "answer": "# Passing Profile ID in the URL Between Owned Domains\nThis feature is beneficial if you want to ensure that the same profile ID is created within owned domains. For example,\nif you own two domains that are linked and you click and redirect user from one domain to another domain, the same\nprofile ID should be used. The JavaScript code can be used to rewrite links on the page to contain the current profile\nand pass it to destination domain. However, the profile must first exist in the system.\n\nSystem then will recognize that the profile already exists and is redirected from other domain and will \nconnect the same profile to the customer even if customer never visited this page before.\n\nPlease note that default behaviour without `passing of profile ID` enabled would be to create a random profile ID\nif customer never visited the page before. And later merge the profile if customer provides data that can be used \nfor this. \n\nTo activate `passing of profile ID` feature, add `trackExternalLinks` to `settings`:\n\n```javascript title=\"Example\" linenums=\"1\" hl_lines=\"10-12\"\n    const options = {\n      tracker: {\n        url: {\n            script: 'http://localhost:8686/tracker',\n            api: 'http://localhost:8686'\n        },\n        source: {\n            id: \"3ee63fc6-490a-4fd8-bfb3-bf0c8c8d3387\"\n        },\n        settings: {\n          trackExternalLinks: ['example.com', 'tracardi.com']\n        }\n    }\n}\n```\n\nThis will automatically update all `A.href` links on the page with the `__tr_pid`, `__tr_src` parameter, which will\ncontain the current profile ID, source ID respectively, if the A.href URL end with any of the defined domains\nin `trackExternalLinks`. In our example it is 'example.com' and ,\n'tracardi.com'.\n\nHere is the explanation how Tracardi treats referenced profiles and session IDs.\n\nTracardi checks if there is referer data containing a profile ID and source ID. If it exists and is valid, it merges the\nreferred profile with the existing profile in the local storage on the visited page (domain). If there is no existing\nprofile on visited page, it replaces current generated profile ID with the referred one.\n\nIt also invalidates the session if it has the wrong profile ID and creates a new session if none exists. If the referred\nprofile ID is invalid, it logs a warning. Similarly, if the referred source ID is invalid, it logs a warning and shows\nthe error message.\n"}