{"file_name": "docs/installation/upgrades.md", "questions": ["- What is the process for upgrading Tracardi and performing data migration between versions?", "- How to upgrade Tracardi and perform data migration between versions?", "- What is the consequence of upgrading to a new version of Tracardi?", "- How to perform automated system upgrades in Tracardi version 0.7.0 and above?", "- What are the prerequisites for upgrading Tracardi?", "- How to perform data migration between versions in Tracardi version 0.7.2 and higher?", "- How to resolve the issue of reaching the Elasticsearch limit of 1000 indices when performing multiple upgrades?", "- How to delete old indices in Tracardi version 0.8.0 and above?"], "answer": "# Tracardi Upgrades and System upgrade\nThis documentation provides information on how to upgrade Tracardi and perform data migration between versions. It also\ncovers the process of updating the system and the precautions to take during the upgrade process.\n\n## Upgrades\n\nTracardi is still in active development, and upgrading to a new version may introduce compatibility issues due to\nchanges in workflow persistence. Workflows created in one version may not work properly with all available plugins in a\nnewer version, or the plugins may behave differently.\n\nTo upgrade the source to the latest development version, pull the new docker image:\n\n```bash\ndocker pull tracardi/tracardi-api:<version>\ndocker pull tracardi/tracardi-gui:<version>\n```\n\nThen you can run it the same way as written in the [installation](installation/index.md) guide.\n\n!!! Warning\n\n    Upgrades of minor or development versions of Tracardi may cause data loss. Each development version is\n    marked with a `-dev` suffix.\n\n### Prerequisites for Upgrading\n\nBefore upgrading, it is crucial to ensure that you only install dockers with a tagged version. Installing the latest\nversion without proper tagging may lead to incorrect data, resulting in the loss of continuity during the upgrade\nprocess. Therefore, it is essential to install the appropriate tagged version to facilitate a smooth system upgrade.\n\n### Automated System Upgrades\n\nStarting from version 0.7.0, Tracardi offers automated system upgrades. Unlike previous versions, which could only\nupgrade the code, version 0.7.0 and above maintain information about the indexes used. Access to data is achieved\nthrough aliases, which function like symbolic links.\n\n#### The Upgrade Process\n\nWhen performing an upgrade, Tracardi leaves the old version indexes unchanged and designates them as the previous\nversion. Simultaneously, new empty indexes are created, along with new aliases (each prefixed with version number). If\nthe schema of the old index remains unchanged, the data pointer is switched from the old index to the new one. However,\nif there are schema changes, the data is migrated using a script that rewrites the data between indexes and copies the\ndata from the old fields to the new ones accordingly. This process ensures a seamless transition during the upgrade.\n\n---\n\n## Upgrades post version 0.7.2\n\nIn Tracardi version 0.7.2, a feature was introduced that allows for data migration between versions. Each new Tracardi\ninstallation creates a new, empty database, and the data from an old version can be migrated to the new one. To perform\nthis migration, follow these steps:\n\n1. Navigate to the maintenance/migration page.\n2. Locate the migration script from the old version.\n3. Follow the instructions provided in the script to complete the data migration.\n\nNote that this feature is only available in Tracardi version 0.7.2 and higher. If you are using an older version, you\nwill need to upgrade to at least 0.7.2 to access this functionality.\n\n!!! Warning\n\n    If you perform multiple upgrades of Tracardi, the system will create a large number of new indices, which\n    may cause you to reach the Elasticsearch limit of 1000 indices. To resolve this issue, you can either increase the limit\n    in the Elasticsearch configuration or delete the indices used by old Tracardi versions. Tracardi version 0.8.0 includes\n    a feature in the GUI to delete old indices. If you are using an older version, you can use the API to delete old\n    indices, such as issuing an HTTP DELETE call to `/indices/version/0.7.2` to delete the 0.7.2 version indices. However,\n    be cautious when deleting old data, as there is no way to revert the system to an older version once the data has been\n    deleted. It is important to thoroughly test your new Tracardi installation before deleting any old data.\n\n## Installation prior Version 0.7.0\n\nVersions prior to 0.7.0 are not aware of previous data schemas. Therefore, the system does not know what indexes were\nused pr", "hash": "51db8a7c6ca9ae78ab7260dfb874f0bba4f4e6f0"}